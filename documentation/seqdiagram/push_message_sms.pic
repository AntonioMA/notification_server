.PS
copy "sequence.pic"

#boxwid = 1
movewid = 1

# Object definition
object(A,"application")
object(N,"node/core")
object(S,"notification")
object(W,"web_app")
step

# Push notification
active(W)
message(W,W,"Generate Data notification")
message(W,W,"crypto(data,publicKey)")
message(W,S,"POST publicURL?origin&data")
active(S)
message(S,W,"Verify origin")
active(W)
return_message(W,S,"origin info")
inactive(W)

step
message(S,S,"check(APP_UUID) -> NODE_UUID")
message(S,S,"check(NODE_UUID) -> MSISDN")
message(S,N,"sendSMS(MSISDN,origin,data)")
active(N)
message(N,A,"event(data)")
active(A)
message(A,A,"doSomething()")
return_message(A,N,"OK")
inactive(A)
return_message(N,S,"200 OK")
inactive(N)

return_message(S,W,"200 OK / 404 Not Found")
inactive(S)
step
inactive(W)

# End diagram
step
complete(A)
complete(N)
complete(S)
complete(W)

.PE